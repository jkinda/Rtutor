<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3 Hints and Tests • RTutor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="3 Hints and Tests">
<meta property="og:description" content="RTutor">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RTutor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2020.11.25</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Manuals</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/skranz/RTutor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="03_HintsAndTests_files/header-attrs-2.5/header-attrs.js"></script><link href="03_HintsAndTests_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="03_HintsAndTests_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>3 Hints and Tests</h1>
            
      
      
      <div class="hidden name"><code>03_HintsAndTests.Rmd</code></div>

    </div>

    
    
<div id="hints-and-tests" class="section level1">
<h1 class="hasAnchor">
<a href="#hints-and-tests" class="anchor"></a>Hints and Tests</h1>
<div id="automatic-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#automatic-hints" class="anchor"></a>Automatic Hints</h2>
<p>I put a lot of effort into writing sensible automatic tests and hints for RTutor. In most cases problem set tasks without customized hints or tests should yield a decent experience for users.</p>
<p>If no custom hint is provided, RTutor calls automatically either <code>hint.for.assign</code> (if a variable is assigned), <code>hint.for.call</code> (function call without assignment), <code>hint.for.function</code> (if the user generates a function) or <code>hint.for.compute</code> (for multi-step computations in a compute block).</p>
<p>For an example of an automatic hint, consider a chunk were students shall write a dplyr pipe. The code in the solution file is:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; task</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dat = tibble(a = sample(<span class="kw">1:</span><span class="dv">4</span>,<span class="dv">100</span>, replace=TRUE), x=runif(<span class="dv">100</span>,<span class="dv">0</span>,a))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>dat %&gt;%</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  group_by(a) %&gt;%</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  summarize(mean_x = mean(x)) %&gt;%</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  arrange(-mean_x)</span></code></pre></div>
<p>If the user writes the following wrong code</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dat = tibble(a = sample(<span class="kw">1:</span><span class="dv">4</span>,<span class="dv">100</span>, replace=TRUE), x=runif(<span class="dv">100</span>,<span class="dv">0</span>,a))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>dat %&gt;%</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  group_by(a) %&gt;%</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  summarize(mean_x = sum(x)) %&gt;%</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  arrange(-mean_x)</span></code></pre></div>
<p>The test fails with a not very informative message:</p>
<pre><code>Error: 
You have not yet entered all correct commands in chunk 1.
For a hint, type hint() in the console and press Enter.</code></pre>
<p>When typing <code><a href="../reference/hint.html">hint()</a></code> the automatic hint shows a relatively detailed error analysis:</p>
<pre><code>In your following pipe chain, I detect an error in the 3rd element:

dat %&gt;%
   group_by(a) %&gt;%
   summarize(mean_x = sum(x)) %&gt;% !! WRONG !!
   arrange(-mean_x) 

It is correct to call summarize. But: Your argument mean_x = sum(x)
differs from my solution, where I call the function mean.</code></pre>
<p>There are cases were you may want to customize your hints. Sometimes the automatic hints may reveal to much, sometimes they may reveal to little, or sometimes you just want to really polish your problem set and want hints with nicer texts.</p>
<p>There are also (in my experience substantially fewer) cases, in which you want to adapt the automatic correctness tests. We will describe test customization further below.</p>
</div>
<div id="analyse-students-submissions-to-improve-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#analyse-students-submissions-to-improve-hints" class="anchor"></a>Analyse students’ submissions to improve hints</h2>
<p>In general it is hard to predict where and how hints should be customized. If you use your problem sets in a course in which students submit there solution, take a look at the README.md of the companion package <a href="https://github.com/skranz/RTutorSAGI">RTutorSAGI</a>. It describes how you can analyse log files contained in the submission to detect and improve problematic tasks were many students got stuck. This allows for a nice iterative improvement process for your problem sets.</p>
</div>
</div>
<div id="customizing-hints" class="section level1">
<h1 class="hasAnchor">
<a href="#customizing-hints" class="anchor"></a>Customizing Hints</h1>
<div id="custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-hints" class="anchor"></a>Custom hints</h2>
<p>Consider the following specification in a problem set solution file. The user shall store the mean of a variable <code>x</code> in the variable <code>m</code> and then show <code>m</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>m = mean(x)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>cat(<span class="st">"Use Google, e.g. search for 'R compute mean'."</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>cat(<span class="st">"Great, you computed m. But read the task exactly, you shall also show it. Just type m in your code."</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span></code></pre></div>
<p>The <code>#&lt; hint</code> blocks describe the code that is run if the user calls <code><a href="../reference/hint.html">hint()</a></code> after the expression directly above was not solved correctly.</p>
<p>We have a different hint for each of the two expressions. Such a custom hint block overwrites the automatic hints, which won’t be shown. A motivation to overwrite the first automatic hint is that it makes the solution too simple by already revealing the function name <code>mean</code> (although not the argument <code>y</code>). Here the custom hint pushes students to learn the extremely useful method to solve problems when coding: search the internet.</p>
<p>The second custom hint is not really neccessary though, since the automatic hint essentially reveals the same info. We can also set custom hints only for some expressions in a chunk, e.g.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>m = mean(x)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>cat(<span class="st">"Use Google, e.g. search for 'R compute mean'."</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
</div>
<div id="adaptive-custom-hints-for-specific-user-calls" class="section level2">
<h2 class="hasAnchor">
<a href="#adaptive-custom-hints-for-specific-user-calls" class="anchor"></a>Adaptive custom hints for specific user calls</h2>
<p>If you use <a href="https://github.com/skranz/RTutorSAGI/">RTutorSAGI</a> you may find that repeatedly many users make some specific errors. You can create custom hints that are only shown if a user made a specific call using <code>hint.stud.assign</code>. Here is an example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; task_notest</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw a vector of 10 normally distributed random variables with mean 0 and variance 4.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>rnorm(<span class="dv">10</span>,<span class="dv">0</span>,<span class="dv">2</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>hint.stud.call(rnorm(<span class="dv">10</span>,<span class="dv">0</span>,<span class="dv">4</span>),<span class="st">"Remember that R expects the standard deviation, not the variance, as 3rd argument of rnorm."</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>hint.stud.call(rnorm(<span class="dv">10</span>,mean=<span class="dv">0</span>),<span class="st">"You did not specify the standard deviation."</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>auto.hint.else()</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span></code></pre></div>
<p>So whenever the student mixes up variance and standard deviation in his call, the customized hint is shown. If she forgot to specify the standard deviation another customized hint is shown. (Whether arguments are named or not does not matter when comparing to the student’s solution.).</p>
<p>The line <code><a href="../reference/auto.hint.else.html">auto.hint.else()</a></code> means that if no customized hint is shown, the automatic hint is shown.</p>
<p>There is also a function <code>hint.stud.assign</code> that works similarly for assignments. Look at the following example that also illustrates some other features.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; task_notest</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Let x be a vector of 10 normally distributed random variables with mean 0 and variance 4.</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Let y be a transformation of x that is lognormally distributed.</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>x = rnorm(<span class="dv">10</span>,<span class="dv">0</span>,<span class="dv">2</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>hint.stud.assign(<span class="st">"x"</span>,rnorm(<span class="dv">10</span>,<span class="dv">0</span>,<span class="dv">4</span>),<span class="st">"Remember that R uses the standard deviation not the variance as 3rd argument of rnorm."</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>auto.hint.else()</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>y = exp(x)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>hint.stud.assign(<span class="st">"y"</span>,log(x),<span class="st">"Yeah, looks intuitive to take the log of x. But that is how you transform a log-normally distributed variable to a normally distributed one. Here you have to use the inverse operation."</span>)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>hint.else(<span class="st">"Take a look at the Wikipedia page of the log normal distribution."</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span></code></pre></div>
<p>The adaptive hints will still be matched to a particular command in the sample solution. The command <code>hint.else</code> allows to show a custom hint instead of the automatic hint in case that no previous adaptive custom hint was triggered. (You could also add an additional line <code>auto.hint.else</code> to show both.)</p>
<p>Note that <code>hint.stud.assign</code> compares the call expression not the resulting value.</p>
<p>If you just want to give a hint if the student uses some function in its code irrespective of the function arguments, you can use <code>hint.stud.fun</code> instead. Here is an example:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="co">#&lt; task_notest</span>
<span class="co"># Add the vectors x and y together</span>
<span class="kw">x</span> <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>
<span class="kw">y</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>
<span class="co">#&gt;</span>
<span class="kw">x</span><span class="op">+</span><span class="kw">y</span>
<span class="co">#&lt; hint</span>
<span class="fu"><a href="../reference/hint.stud.fun.html">hint.stud.fun</a></span>(<span class="st">"sum"</span>,<span class="st">"Please don't use the function 'sum'. A simple plus sign '+' is enough."</span>)
<span class="fu"><a href="../reference/auto.hint.else.html">auto.hint.else</a></span>()
<span class="co">#&gt;</span>
</pre></div>
<p>Note that it also works if the function is called in an assignment. If you have nested function calls, it only looks at the outer call.</p>
</div>
<div id="more-flexible-adaptive-custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#more-flexible-adaptive-custom-hints" class="anchor"></a>More flexible adaptive custom hints</h2>
<p>You can also define more flexible adaptive hints that evaluate the value of a student’s assignment.</p>
<p>Here is an example, where the task is to assign the first 100 square numbers to the variable <code>z</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>z = <span class="kw">1:</span><span class="dv">100</span> * <span class="kw">1:</span><span class="dv">100</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>if (true(identical(z,<span class="kw">1:</span><span class="dv">10</span>*<span class="kw">1:</span><span class="dv">10</span>))) {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  cat(<span class="st">"Huh, you made a common mistake. Read the task precisely.</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  You shall assign to z the first <span class="dv">100</span> square numbers,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>not only all square numbers that are less or equal to <span class="dv">100</span><span class="st">")</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>} else if (true(length(z)!=<span class="dv">100</span>)) {</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  cat(<span class="st">"Your variable z must have 100 elements,</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  but in your solution z has<span class="st">", length(z),"</span>elements.<span class="st">")  </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>} else {</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  cat(<span class="st">"There is a simple one-line formula to compute the first 100 square numbers.</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  Just combine what you have learned in exercise <span class="dv">2</span> f) and in exercise <span class="dv">3</span> b).</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="st">")</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span></code></pre></div>
<p>The code in the hint block will be evaluated in an environment in which all variables defined in earlier solved chunks are known. Also (at least if you use the default tests) the student’s current code has been already be evaluated in the hint environment.</p>
<p>This means whether whether <code>z</code> exists in the hint environment depends on whether the user has defined it in her solution for the chunk or not. The function <code>true</code> is a robust version of <code>isTRUE</code> that never throws an error. This means even if <code>z</code> does not exist and thus the expression cannot be evaluated, we just get a <code>FALSE</code>.</p>
</div>
<div id="combine-automatic-and-custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#combine-automatic-and-custom-hints" class="anchor"></a>Combine automatic and custom hints</h2>
<p>To combine automatic and custom hints, you can add a line that only contains</p>
<p><code><a href="../reference/auto.hint.html">auto.hint()</a></code></p>
<p>in your hint block (possibly inside an if block). Then also the automatic hint is shown.</p>
<p>If you add a line</p>
<p><code><a href="../reference/auto.hint.else.html">auto.hint.else()</a></code></p>
<p>then the automatic hint is only shown if no <code>hint.stud.call</code> or <code>hint.stud.assign</code> above showed a hint.</p>
<p>There is also an alternative way carried over from previous RTutor versions to combine custom and automatic hints. It is simpler if you just always want to combine automatic hint with an additional custom hint. Then write your hint code in an <code>add_to_hint</code>block.</p>
<p>Here is an example for an adaptive custom hint in an <code>#&lt; add_to_hint</code> block from one of my problem sets:</p>
<blockquote>
<p>Task: Using the command <code>cbind</code>, generate the matrix X of explanatory variable whose first column consists of 1 and the second column consists of p.</p>
</blockquote>
<div class="sourceCode" id="cb11"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>X = cbind(<span class="dv">1</span>,p)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; add_to_hint</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>if (exists(<span class="st">"x"</span>) &amp; !exists(<span class="st">"X"</span>)) {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  cat(<span class="st">"It looks like you assigned the value to 'x' (lowercase), but you shall assign the value to 'X' (uppercase)."</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span></code></pre></div>
<p>Looking at the logs of students’ solution, it became apparent that many mixed up X with x. The automatic hint did not help for this problem, yet in other cases, it was helpful. So I just wanted to add this specific custom hint to the automatic hint.</p>
</div>
<div id="hints-at-the-beginning-of-chunk" class="section level2">
<h2 class="hasAnchor">
<a href="#hints-at-the-beginning-of-chunk" class="anchor"></a>Hints at the beginning of chunk</h2>
<p>If you place a hint at the beginning of a chunk, the hint text will be added to all the hints of the individual commands.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; hint</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>cat(<span class="st">"This hint will be added to the automatic hints</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>of all commands below.<span class="st">")</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>x = <span class="kw">1:</span><span class="dv">10</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>y = x^<span class="dv">2</span></span></code></pre></div>
</div>
<div id="a-complex-example" class="section level2">
<h2 class="hasAnchor">
<a href="#a-complex-example" class="anchor"></a>A complex example</h2>
<p>The following example combines several of the aspects above. It also uses the function <code><a href="../reference/hint.else.active.html">hint.else.active()</a></code> to manually set whether an <code>hint.else</code> or <code>auto.hint.else</code> shall be shown. If you want to construct such complex hints (often there is no need, you can just go with the automatic hints), you may perhaps want to debug your code. For this you can use <a href="https://skranz.github.io/r/2015/02/15/restorepoint.html">restorepoints</a>, which you should later remove.</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="co">#&lt; hint</span>
<span class="co"># This sentence will always be shown at the bottom of each hint</span>
<span class="co"># for this chunk</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"\nNote that you should be able to solve this exercise in an exam."</span>)
<span class="co">#&gt;</span>
<span class="co">#&lt; task_notest</span>
<span class="co"># Let x be a vector of 10 normally distributed random variables with mean 0 and variance 4.</span>
<span class="co"># </span>
<span class="co"># Let y be a transformation of x that is lognormally distributed.</span>
<span class="co">#&gt;</span>
<span class="kw">x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">10</span>,<span class="fl">0</span>,<span class="fl">2</span>)
<span class="co">#&lt; hint</span>
<span class="fu"><a href="../reference/hint.stud.assign.html">hint.stud.assign</a></span>(<span class="st">"x"</span>,<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">10</span>,<span class="fl">0</span>,<span class="fl">4</span>),<span class="st">"Remember that R uses the standard deviation not the variance as 3rd argument of rnorm."</span>)
<span class="fu"><a href="../reference/auto.hint.else.html">auto.hint.else</a></span>()
<span class="co">#&gt;</span>
<span class="kw">y</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span>(<span class="kw">x</span>)
<span class="co">#&lt; hint</span>
<span class="fu">restore.point</span>(<span class="st">"myhint"</span>) <span class="co"># for debugging purposes</span>
<span class="fu"><a href="../reference/hint.stud.assign.html">hint.stud.assign</a></span>(<span class="st">"y"</span>,<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="kw">x</span>),<span class="st">"Yeah, looks intuitive to take the log of x. But that is how you transform a log-normally distributed variable to a normally distributed one. Here you have to use the inverse operation."</span>)
<span class="co">if</span> (<span class="op">!</span><span class="fu"><a href="../reference/true.html">true</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span>(<span class="kw">y</span>))) { <span class="co"># also triggers if y does not exist</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"\nYou should generate a numeric variable y."</span>)
  <span class="fu"><a href="../reference/hint.else.active.html">hint.else.active</a></span>(<span class="fl">FALSE</span>) <span class="co"># turn off hint.else</span>
}
<span class="fu"><a href="../reference/hint.else.html">hint.else</a></span>(<span class="st">"Take a look at the Wikipedia page of the log normal distribution."</span>)
<span class="co">#&gt;</span>
</pre></div>
</div>
</div>
<div id="customizing-tests" class="section level1">
<h1 class="hasAnchor">
<a href="#customizing-tests" class="anchor"></a>Customizing Tests</h1>
<p>I tried my best to automatically test whether the student entered a correct solution or not.</p>
<p>A typical reason for adapting the automatic tests or writing custom tests is when you want to allow several correct solutions for a specific task.</p>
<div id="specifying-parameters-of-automatic-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-parameters-of-automatic-tests" class="anchor"></a>Specifying parameters of automatic tests</h2>
<p>Automatic tests either call <code>check.assign</code> (if a value is assigned to a variable), <code>check.call</code> (a statement that does not assign a variable), or <code>check.function</code> (if a function is generated). These test function have a number of arguments, that allow to customize the tests.</p>
<p>A <code>test_arg</code> blocks allows you to change the arguments of a default test for the preceding statement. Consider the following example:</p>
<pre><code><a href="https://rdrr.io/r/graphics/plot.default.html">plot(x=p,y=q,main="A plot", xlab="Prices")
#&lt; test_arg
  ignore.arg = c("main","xlab")
  allow.extra.arg=TRUE
#&gt;</a></code></pre>
<p>The <code>#&lt; test_arg</code> block customizes the parameters <code>ignore.arg</code> and <code>allow.extra.arg</code> of the <code>check.call</code> function. The parameter <code>ignore.arg = c("main","xlab")</code> means that the student does not have to add these two arguments to the plot function or can use different values. The parameter <code>allow.extra.arg=TRUE</code> allows the student to specify additional arguments when calling plot, e.g. specifying a <code>ylab</code>. So essentially, it will now only be tested whether the x and y arguments of the plot are correct and any customization of the plot will still be considered a correct solution. See the help of <code>check.call</code> for a description of arguments.</p>
</div>
<div id="allowing-several-correct-solutions" class="section level2">
<h2 class="hasAnchor">
<a href="#allowing-several-correct-solutions" class="anchor"></a>Allowing several correct solutions</h2>
<p>Consider the following example</p>
<blockquote>
<p>Task: Let x contain the square roots of 4</p>
</blockquote>
<div class="sourceCode" id="cb15"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x = c(-<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; test_arg</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>other.sols = list(quote(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  x&lt;-c(<span class="dv">2</span>,-<span class="dv">2</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; add_to_hint</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>if (true(identical(x,<span class="dv">2</span>) | identical(x,-<span class="dv">2</span>))) {</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  cat(<span class="st">"Recall that 4 has two square roots: a positive and a negative one.)</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span></code></pre></div>
<p>The argument <code>other.sols</code> of the default test function <code>check.assign</code> takes a list of quoted assignments that consitute alternative correct solutions. In the example above, we don’t care about the order of the solution vector. Note that you must assign with <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> instead of <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code> inside the <code>quote</code> function.</p>
</div>
<div id="testing-only-selected-columns-in-a-data-frame" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-only-selected-columns-in-a-data-frame" class="anchor"></a>Testing only selected columns in a data frame</h2>
<p>Consider a data set <code>dat</code> were we observe the sales quantity <code>q</code> of all car models for different years and regions. The student has the task to create a new data frame <code>dat1</code> with an additional column that contains the market <code>share</code> of each car model in each year and region. We don’t care with which exact commands <code>share</code> is computed, however.</p>
<p>Below is the specification in the solution file:</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="kw">dat1</span> <span class="op">=</span> <span class="kw">dat</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="kw">year</span>,<span class="kw">region</span>) <span class="op">%&gt;%</span>
  <span class="fu">mutate</span>(
    Q = <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw">q</span>), <span class="co"># Total sales</span>
    share = <span class="kw">q</span> <span class="op">/</span> <span class="kw">Q</span>   <span class="co"># Market share of each car</span>
  )
<span class="co">#&lt; test_arg</span>
<span class="kw">check.cols</span> <span class="op">=</span> <span class="st">"share"</span>
<span class="kw">sort.cols</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"year"</span>,<span class="st">"market"</span>,<span class="st">"car_model"</span>)
<span class="co">#&gt;</span>
</pre></div>
<p>In the sample solution, we compute an intermediate variable <code>Q</code>, which is not really neccessary to solve the exercise. The test argument <code>check.cols</code> can specify a subset of columns that will be checked. Here we only want to check the column <code>share</code>. The argument <code>sort.cols</code> specifies that both the sample solution and the student’s solution shall be sorted by the given columns. If the sort columns uniquely identify each row, this guarantees that solution is also accepted if the student has ordered the data frame in a different way than the sample solution. (If the student deletes one of the sort columns, the test will return <code>FALSE</code>.)</p>
<p>While the correctness checks accept many different solutions, the automatic hints when <code><a href="../reference/hint.html">hint()</a></code> is typed will guide the student along the concrete given sample solution.</p>
<p>Note that <code>check.cols</code> and <code>sort.cols</code> are only used if the sample solution computes a <code>data.frame</code> or <code>tibble</code>.</p>
</div>
<div id="custom-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-tests" class="anchor"></a>Custom tests</h2>
<p>If you need more customization, e.g. because there is a large number of correct solutions, you can use a <code>test</code> block. Unlike a <code>hint</code> block you cannot just enter arbitrary code that will be evaluated in an approbriate environment. Instead you should call one or several given test functions like <code>holds.true</code>, <code>check.variable</code>, <code>check.expr</code>, <code>test.H0.rejected</code>, <code>test.H0</code> and <code>check.regression</code>.</p>
<p>Consider the following an example:</p>
<pre><code>#' b) Save in the variable u a vector of 4 different numbers
u = c(3,6,7,99)  
#&lt; test
check.variable("u",c(3,6,7,99),values=FALSE)
#&gt;</code></pre>
<p>The automatic test <code>check.assign</code> would pass if one of the following two conditions is met:</p>
<ul>
<li>
<code>u</code> has the same value than in the solution. This means <code>u=c(2,5,6,98)+1</code> would also pass as correct solution</li>
<li>
<code>u</code> is generated by an equivalent call as in the solution (equivalent means the function name should be the same and the arguments should have the same value). This is useful if the solution is a call that generates a random variable like <code>x = runif(1)</code>.</li>
</ul>
<p>Yet in this example, the automatic test is too restrictive. The student shall just generate some arbitrary vector consisting of 4 numbers. The block</p>
<pre><code><a href="../reference/check.variable.html">#&lt; test
check.variable("u",c(3,6,7,99),values=FALSE)
#&gt;</a></code></pre>
<p>replaces the automatic test with a test that just checks whether a variable <code>u</code> exists, and has the same length and class (numeric or integer) as an example solution <code><a href="https://rdrr.io/r/base/c.html">c(3,6,7,99)</a></code>.</p>
</div>
<div id="an-more-complex-example-of-custom-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#an-more-complex-example-of-custom-tests" class="anchor"></a>An more complex example of custom tests</h2>
<p>Here is a more complex example for customized tests and hints.</p>
<blockquote>
<p>Task: Simulate a vector p of T prices that are correlated (but not perfectly correlated) with the weather w but uncorrelated with the demand shock u.</p>
</blockquote>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="kw">p</span> <span class="op">=</span> <span class="fl">1.1</span><span class="op">*</span><span class="kw">c</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span><span class="kw">w</span>
<span class="co">#&lt; test</span>
<span class="fu"><a href="../reference/check.variable.html">check.variable</a></span>(<span class="st">"p"</span>,<span class="fl">1.1</span><span class="op">*</span><span class="kw">c</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span><span class="kw">w</span>,values=<span class="fl">FALSE</span>)
<span class="fu"><a href="../reference/test.H0.rejected.html">test.H0.rejected</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/cor.test.html">cor.test</a></span>(<span class="kw">p</span>,<span class="kw">w</span>),failure.message=<span class="st">"I don't find a significant correlation between p and w (p-value=={{p_value}})"</span>)
<span class="fu"><a href="../reference/holds.true.html">holds.true</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span>(<span class="kw">p</span>,<span class="kw">w</span>)<span class="op">&lt;</span><span class="fl">1</span><span class="op">-</span><span class="fl">1e-14</span>, failure.message=<span class="st">"p and w shall not be perfectly correlated!"</span>)
<span class="fu"><a href="../reference/test.H0.html">test.H0</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/cor.test.html">cor.test</a></span>(<span class="kw">p</span>,<span class="kw">u</span>),failure.message=<span class="st">"I do find a significant correlation between p and u (p-value=={{p_value}}), but they shall be uncorrelated."</span>)
<span class="co">#&gt;</span>
<span class="co">#&lt; hint</span>
<span class="fu"><a href="../reference/display.html">display</a></span>(<span class="st">"To make your prices correlated with w, you have to make w appear in the formula of p. To make p not perfectly correlated with p, there must also be other random factors that influence p, like cost c or some newly drawn vector of random price shocks."</span>)
<span class="co">#&gt;</span>
</pre></div>
<p>We still provide a sample solution <code>p = 1.1*c + 0.5*w</code>, but many other solutions are possible here.</p>
<p>A feasible solution must pass all 4 tests in the test block to be accepted. The function <code>holds.true</code> is a quite general tool that can be used in custom tests.</p>
<p>The functions <code>test.H0.rejected</code>, and <code>test.H0</code> are just examples for special purpose convenience test functions.</p>
<p>Note that if you specify a custom test there will be no automatic hint. We thus added a custom hint.</p>
</div>
<div id="testing-a-function-written-by-the-student" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-a-function-written-by-the-student" class="anchor"></a>Testing a function written by the student</h2>
<p>Personally, I find it very valuable if students learn to write own functions. However, it is not easy to nicely test functions and students with little programming experience can get stuck easily.</p>
<p>Assume, you would like students to write an OLS function</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>ols = function(y,X) {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  Xt = t(X)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  invXtX = solve(Xt %*% X)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  beta.hat = invXtX %*% Xt %*% y</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  as.numeric(beta.hat)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Directly asking them to correctly write such a function will probably fail for many students.</p>
<p>But you could first create one or several chunks, were students first develop the function body for an example. A solved chunk may look like</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example arguments</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>x1 = <span class="kw">1:</span>T </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>y = <span class="dv">100</span> + <span class="dv">2</span>*x1 + rnorm(<span class="dv">1</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>X = cbind(<span class="dv">1</span>,x1)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Code that we will put inside the function</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>Xt = t(X)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>invXtX = solve(Xt %*% X)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>beta.hat = invXtX %*% Xt %*% y</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>as.numeric(beta.hat)</span></code></pre></div>
<p>Then provide a function stub like</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>ols = function(y,X) {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Insert your code here</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>and let students insert their code here.</p>
<p>Here is an example how you might specify the second chunk in your solution file:</p>
<pre><code>#&lt; fill_in
ols = function(y,X) {
  
  # enter code to compute beta.hat here ...
  
  return(as.numeric(beta.hat))
}
#&gt;
ols &lt;- function(y,X) {
  beta.hat = solve(t(X) %*% X) %*% t(X) %*% y
  as.numeric(beta.hat)
}
#&lt; test_arg
  ols(
    c(100,50,20,60),
    cbind(1,c(20,30,15,20))
  )
#&gt;
#&lt; add_to_hint
display("Just insert inside the function ols the code to compute beta.hat from the previous task")
#&gt;</code></pre>
<p>First, we have a <code>#&lt; fill_in</code> block that specifies an unfinished function that will be shown to the student. Afterward, we have an example of a correct function <code>ols</code>. Then the <code>#&lt; test_arg</code> block specifies parameters for the automatic test <code>check.function</code>. The unnamed parameter</p>
<pre><code>ols(c(100,50,20,60),cbind(1,c(20,30,15,20)))</code></pre>
<p>Specifies a test call. <code>check.function</code> will run this test call for both the sample solution and the student’s solution. The test will only pass if the both versions of the ols function return the same value. Finally, the <code>#&lt; add_to_hint</code> add some information to the automatic hint.</p>
</div>
<div id="testing-a-function-that-generates-random-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-a-function-that-generates-random-variables" class="anchor"></a>Testing a function that generates random variables</h2>
<p>If you want to check a function that creates random variables, you can compare the results of the student’s function and the official solution using the same random seed.</p>
<p>Here is an example:</p>
<pre><code>a) Write a function `runif.square` with parameters n, min and max
that generates n random variables that are the square of variables
that are uniform distributed on the interval from min to max.

```{r}
runif.square = function(n,min,max) {
  runif(n,min,max)^2
}
#&lt; test_arg
  with.random.seed(runif.square(n=20,min=4,max=9), seed=12345)
#&gt;
```</code></pre>
<p>Our test call is now embedded in the function <code>with.random.seed</code> that calls the function with a fixed random seed. Then the automatically called <code>check.function</code> only passes if the students function and official solution return the same value when called with the same random seed.</p>
<p>If a function requires simulation of more than one random number, this testing procedure only works if the student draws the random numbers in the same order than the official solution. This means your task should specify already a lot of structure for the function and tell the student not to draw any additional random variables inside the function.</p>
</div>
</div>
<div id="compute-blocks-for-computations-with-many-steps" class="section level1">
<h1 class="hasAnchor">
<a href="#compute-blocks-for-computations-with-many-steps" class="anchor"></a>Compute blocks for computations with many steps</h1>
<p>Sometimes you want to ask students to perform computations that will usually require several intermediate steps. Two somewhat opposite ways of implementing such multistep computations in a problem set would be the following:</p>
<ol style="list-style-type: lower-roman">
<li>Only check the final result and let the student figure out the intermediate steps herself.</li>
<li>Include all intermediate steps as part of the problem set</li>
</ol>
<p>A <code>#&lt; compute ... #&gt;</code> block allows an intermediate approach. Here is an example from a problem set of mine that asks a student to compute a matrix of choice probabilities from a conditional logit model.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>#&lt; compute P

## Take a look at the formula for the choice probabilities P.nj of the logit discrete choice model in the slides.

## Let exp.V be a matrix that contains the numerators of P.nj (use scale as sigma in your formula)
exp.V = exp(V/scale)

## Let sum.exp.V be a vector that contains for each person n the denominator in P.nj. You can use the function 'rowSums'. 
sum.exp.V = rowSums(exp.V)

## Compute P as ratio of the numerator and the denominator
P = exp.V / sum.exp.V
#&gt;<span class="co">#&lt; compute P</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Take a look at the formula for the choice probabilities P.nj of the logit discrete choice model in the slides.</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Let exp.V be a matrix that contains the numerators of P.nj (use scale as sigma in your formula)</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    exp.V = exp(V/scale)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Let sum.exp.V be a vector that contains for each person n the denominator in P.nj. You can use the function 'rowSums'. </span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    sum.exp.V = rowSums(exp.V)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">## Compute P as ratio of the numerator and the denominator</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    P = exp.V / sum.exp.V</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#&gt;</span></span></code></pre></div>
<p>The solution will pass as correct if the final values of <code>P</code> are correct. The student is not obliged to perform the particular intermediate computations like <code>exp.V</code>. Yet, if the student has not yet correctly computed <code>P</code> and types <code><a href="../reference/hint.html">hint()</a></code>, the hint function tries to steer the student step by step through the sample solution described in the block. The comments starting with <code>##</code> will be transformed into text that will be shown in the hint.</p>
</div>
<div id="testing-ggplot-commands-or-other-plot-commands" class="section level1">
<h1 class="hasAnchor">
<a href="#testing-ggplot-commands-or-other-plot-commands" class="anchor"></a>Testing ggplot commands (or other plot commands)</h1>
<p>RTutor is not good at providing sensible hints or automatic tests that allow a user build long ggplot chains from scratch.</p>
<p>Assume you want to show in a problem set the following ggplot:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>ggplot(data = counties,aes(x=area, y=population, col=state)) +</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  geom_point()+</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  xlim(c(<span class="dv">0</span>, <span class="dv">0</span>.1)) + </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  ylim(c(<span class="dv">0</span>, <span class="dv">500000</span>)) + </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  labs(title=<span class="st">"Area vs Population"</span>, </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>       y=<span class="st">"Population"</span>, </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>       x=<span class="st">"Area"</span>) +</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span></code></pre></div>
<p>One option would be to just provide the plotting commands in a <code>task_notest</code> block and don’t force the student to write anything.</p>
<p>An alternative would be to specify in your solution a fill in block, like:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt; fill_in</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill in the ___</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>ggplot(data = counties,aes(x=___, y=population, colour=___)) +</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  geom_point()+</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  xlim(c(<span class="dv">0</span>, <span class="dv">0</span>.1)) + </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  ylim(c(<span class="dv">0</span>, <span class="dv">500000</span>)) + </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  labs(title=<span class="st">"Area vs Population"</span>, </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>       y=<span class="st">"Population"</span>, </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>       x=<span class="st">"Area"</span>) +</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample solution</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>ggplot(data = counties,aes(x=area, y=population, colour=state)) +</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  geom_point()+</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  xlim(c(<span class="dv">0</span>, <span class="dv">0</span>.1)) + </span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  ylim(c(<span class="dv">0</span>, <span class="dv">500000</span>)) + </span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  labs(title=<span class="st">"Area vs Population"</span>, </span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>       y=<span class="st">"Population"</span>, </span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>       x=<span class="st">"Area"</span>) +</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span></code></pre></div>
<p>Here the student only has to fill in the two mising aesthetics. Please use as placeholders the <code>___</code>, since RTutor’s hints have special treatment that internally replaces the <code>___</code> with a syntactically valid R variable name in order to parse and analyse students solutions.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sebastian Kranz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  
<script type="text/javascript">
var sc_project=12051162; 
var sc_invisible=1; 
var sc_security="60139410"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="web statistics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/12051162/0/60139410/1/"
alt="web statistics"></a></div></noscript>

  </body>
</html>