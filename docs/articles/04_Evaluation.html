<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4 Evaluation Order and Environments • RTutor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="4 Evaluation Order and Environments">
<meta property="og:description" content="RTutor">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RTutor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2020.11.25</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Manuals</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/skranz/RTutor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="04_Evaluation_files/header-attrs-2.5/header-attrs.js"></script><link href="04_Evaluation_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="04_Evaluation_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>4 Evaluation Order and Environments</h1>
            
      
      
      <div class="hidden name"><code>04_Evaluation.Rmd</code></div>

    </div>

    
    
<p>This section gives a short overview about the order in which students have to solve problem sets and methods for customization. We also give some background information about the environments in which solutions are tested.</p>
<div id="default-rule-exercises-matter" class="section level2">
<h2 class="hasAnchor">
<a href="#default-rule-exercises-matter" class="anchor"></a>Default Rule: Exercises Matter</h2>
<p>The default evaluation order is that within an exercise chunks must be solved in the given order. In contrast, it is not neccessary to have solved all previous exercises to start a new exercise.</p>
<p>Recall that the start of a new exercise is determined in your solution file with a line like:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Exercise 1 -- My First Exercise`</span></span></code></pre></div>
</div>
<div id="environments-in-which-chunks-are-tested" class="section level2">
<h2 class="hasAnchor">
<a href="#environments-in-which-chunks-are-tested" class="anchor"></a>Environments in which chunks are tested</h2>
<p>Testing a chunk takes place in an own environment that is not equal to the global workspace.</p>
<p>By default all chunks inside an exercise are evaluated in an environment in which all created variables of earlier chunks in the same exercise are available. Since by default you can only proceed if previous chunks in the exercise are solved correctly, this guarantees that in the testing environment you have the <em>correct</em> solutions of earlier chunks available.</p>
</div>
<div id="environments-in-which-hints-are-evaluated" class="section level2">
<h2 class="hasAnchor">
<a href="#environments-in-which-hints-are-evaluated" class="anchor"></a>Environments in which hints are evaluated</h2>
<p>Adaptive hints also evaluate expression in an environment. If <code><a href="../reference/hint.html">hint()</a></code> is called, it is evaluated in the test environment. It contains all variables from earlier chunks of the same exercise and the variables the student created in the current chunk the last time the current chunk was checked. Note that <code><a href="../reference/hint.html">hint()</a></code> itself does not by default newly evaluate the current chunk code of the student. This means one always should first check a modified solution before asking for a new hint.</p>
</div>
<div id="using-variables-from-earlier-exercises-only-rstudio" class="section level2">
<h2 class="hasAnchor">
<a href="#using-variables-from-earlier-exercises-only-rstudio" class="anchor"></a>Using variables from earlier exercises (Only RStudio)</h2>
<p>By default variables that have been generated by the student in earlier exercises are not known when testing chunks in the current exercise.</p>
<p>It is possible to use variables from earlier exercises, but there is a severe drawback:</p>
<blockquote>
<p>If an exercise imports variables, students can only start with the exercise if all previous exercises from which variables have been imported are completly solved.</p>
</blockquote>
<p>In a shiny app you should always make each exercise self contained. In an RStudio based problem set you may link exercises, in some instances. E.g. you have a very simple initial exercise (that every student should pass) that just loads a data set and all later exercises use the data set from that initial exercise.</p>
<p>Here is an example:</p>
<pre><code>## Exercise 2 -- Proceed with the data analysis

```{r}
#&lt; settings
import.var = list("1"="dat")
#&gt;
```
a) Add a column `ones` to dat that only contains 1. Show dat.
```{r}
dat$ones = 1
dat
```</code></pre>
<p>As you see, in order to use variables from earlier exercises, you must add at the beginning of an exercise a settings block that defines a variable <code>import.var</code>, like</p>
<pre><code>```{r}
#&lt; settings
import.var = list("1"="dat")
#&gt;
```</code></pre>
<p>The variable <code>import.var</code> is a list whose element names correspond to the short exercise names (part of the name before –) from which you want to import variables. The list elements are character vectors of the variable names you want to import from the corresponding exercise.</p>
</div>
<div id="memoization-for-importing-same-data-set-in-several-exercises-in-a-shiny-based-problem-set" class="section level2">
<h2 class="hasAnchor">
<a href="#memoization-for-importing-same-data-set-in-several-exercises-in-a-shiny-based-problem-set" class="anchor"></a>Memoization for importing same data set in several exercises in a shiny based problem set</h2>
<p>In a shiny based problem set, I suggest to <strong>never</strong> make exercises import variables from previous exercises. Not even for data loading. Instead add a chunk at the beginning of each exercise that loads the relevant data again in a task block.</p>
<p>You can use <a href="https://en.wikipedia.org/wiki/Memoization">memoization</a> to avoid behind the scenes that the same data is loaded twice. Assume you call <code>import("mydat.csv")</code> from the library <code>rio</code> in several exercises of your problem set.</p>
<p>You can then call <code>create.ps</code> with the arguments <code>use.memoise=TRUE</code> and <code>memoise.funs=c("rio::import")</code> to avoid that the data set is indeed loaded multiple times.</p>
</div>
<div id="optional-chunks" class="section level2">
<h2 class="hasAnchor">
<a href="#optional-chunks" class="anchor"></a>Optional chunks</h2>
<p>If you set the chunk option <code>optional=TRUE</code>, a chunk needs not be solved in order to continue the exercise. Example:</p>
<pre><code>```{r "1_b", optional = TRUE}
# Code here

```</code></pre>
<p>Variables generated in an optional chunk will <em>not</em> be available in later chunks of the exercise. That is because we cannot be sure whether these variables exist or not.</p>
<p>The environment in which an optional chunk is tested will contain all variables created in non-optional chunks earlier in the exercise.</p>
</div>
<div id="extra-code-file" class="section level2">
<h2 class="hasAnchor">
<a href="#extra-code-file" class="anchor"></a>extra.code.file</h2>
<p>The function <code>create.ps</code> has an argument <code>extra.code.file</code>. This can be set to a the name of an R file. This R file will be sourced when the problem set is generated and all created variables and functions will be available in ALL chunks when chunks are tested. This usually only makes sense for shiny based problem sets.</p>
<p>Note that you don’t have to give the extra code R file to the students. The information will be included in the problem set rps file.</p>
</div>
<div id="preknit-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#preknit-blocks" class="anchor"></a>preknit blocks</h2>
<p>preknit blocks are declared outside of code chunks and start with <code>#&lt; preknit</code> and end with <code>#&gt;</code>.</p>
<p>Any rmd code inside a preknit block will be knitted at compile-time and shown as usual RMarkdown output in the shiny based version of the problem set. This is very similar to the output of an info block, except that it is not put into a collapsible.</p>
<p>Note that code that was evaluated in an earlier preknit block or earlier info block will be available at compile time at later info or preknit blocks, no matter which exercise the blocks are in. If you want just to do some preliminary computations for later info or preknit blocks without showing any output, add a chunk with the chunk option <code>include=FALSE</code> in a preknit block.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sebastian Kranz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  
<script type="text/javascript">
var sc_project=12051162; 
var sc_invisible=1; 
var sc_security="60139410"; 
</script><script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script><noscript><div class="statcounter"><a title="web statistics" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/12051162/0/60139410/1/" alt="web statistics"></a></div></noscript>

  </body>
</html>
